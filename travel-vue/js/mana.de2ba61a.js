(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mana"],{"035b":function(e,t,r){"use strict";var a=r("dcef"),s=r.n(a);s.a},"5bcf":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v(" 首页 ")]),r("el-breadcrumb-item",[e._v("相册管理")])],1),r("el-card",[r("ul",{staticClass:"albumlist"},e._l(e.userlist,(function(t){return r("li",{key:t.userid,on:{click:function(r){return r.preventDefault(),e.getalbumlist(t)}}},[r("div",{staticClass:"albumlist-img"},[r("el-image",{attrs:{src:"../assets/img/1.jpg",width:"164px",height:"164px"}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1),r("div",{staticClass:"albumlist-b"},[e._v(" "+e._s(t.username||"用户名")+" ")])])})),0)]),r("el-dialog",{attrs:{center:"",visible:e.dialogVisible1,"before-close":e.handleClose1,title:"相册管理",width:"85%"},on:{"update:visible":function(t){e.dialogVisible1=t}}},[r("ul",{staticClass:"albumlist albumlist1"},e._l(e.albumlist,(function(t){return r("li",{key:t.albumid,on:{click:function(r){return r.stopPropagation(),e.getphotolist(t)}}},[r("div",{staticClass:"albumlist-img"},[r("el-image",{attrs:{src:t.aPhoto?e.dfUrl+t.aPhoto.photoaddress:"",width:"164px",height:"164px"}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1),r("div",{staticClass:"albumlist1-b",on:{click:function(e){e.stopPropagation()}}},[r("span",[e._v(e._s(t.albumname||"相册名"))]),r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":e.active,"inactive-value":e.inactive},on:{change:function(r){return e.statusChange(t)}},model:{value:t.albumtype,callback:function(r){e.$set(t,"albumtype",r)},expression:"item.albumtype"}})],1)])})),0),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("关 闭")])],1)]),r("el-dialog",{attrs:{center:"",visible:e.dialogVisible2,"before-close":e.handleClose2,title:"相片管理",width:"85%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[r("ul",{staticClass:"albumlist albumlist1"},e._l(e.photolist,(function(t){return r("li",{key:t.photoid},[r("div",{staticClass:"albumlist-img"},[r("el-image",{attrs:{src:e.dfUrl+t.photoaddress,width:"164px",height:"164px","preview-src-list":e.srcList}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1),r("div",{staticClass:"albumlist-b"},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":e.active,"inactive-value":e.inactive},on:{change:function(r){return e.statusChange(t)}},model:{value:t.photoban,callback:function(r){e.$set(t,"photoban",r)},expression:"item.photoban"}})],1)])})),0),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("关闭")])],1)])],1)},s=[],i=(r("45fc"),r("96cf"),r("1da1")),l={data:function(){return{dialogVisible1:!1,dialogVisible2:!1,active:1,inactive:2,dfUrl:"http://localhost:10086/ps/",srcList:[],userlist:[],albumlist:[],photolist:[]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getuserlist();case 1:case"end":return t.stop()}}),t)})))()},methods:{getuserlist:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("user/list");case 2:r=t.sent,a=r.data,e.userlist=a.obj;case 5:case"end":return t.stop()}}),t)})))()},getalbumlist:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dialogVisible1=!0,a=e.userid,r.next=4,t.$http.get("album/list",{params:{id:a}});case 4:s=r.sent,i=s.data,t.albumlist=i.obj;case 7:case"end":return r.stop()}}),r)})))()},getphotolist:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dialogVisible2=!0,a=e.albumid,r.next=4,t.$http.get("album/getphotobyid",{params:{id:a}});case 4:s=r.sent,i=s.data,200===i.code&&(t.photolist=i.obj.photoList,t.photolist.some((function(e){t.srcList.push(t.dfUrl+e.photoaddress)})));case 7:case"end":return r.stop()}}),r)})))()},statusChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,l,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.albumid){r.next=8;break}return a=e.albumid,s=e.albumtype,r.next=4,t.$http.post("admin/banAlbum",{id:a,ban:s});case 4:i=r.sent,i.data,r.next=14;break;case 8:if(!e.photoid){r.next=14;break}return l=e.photoid,n=e.photoban,r.next=12,t.$http.post("admin/banPhoto",{id:l,ban:n});case 12:o=r.sent,o.data;case 14:case"end":return r.stop()}}),r)})))()},handleClose1:function(){this.dialogVisible1=!1},handleClose2:function(){this.dialogVisible2=!1}}},n=l,o=(r("035b"),r("2877")),u=Object(o["a"])(n,a,s,!1,null,"04b5197a",null);t["default"]=u.exports},"7cdc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v(" 首页 ")]),r("el-breadcrumb-item",[e._v("用户管理")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userlist,stripe:""}},[r("el-table-column",{attrs:{label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":e.active,"inactive-value":e.inactive},on:{change:function(r){return e.statusChange(t.row)}},model:{value:t.row.userban,callback:function(r){e.$set(t.row,"userban",r)},expression:"scope.row.userban"}})]}}])}),r("el-table-column",{attrs:{prop:"userid",label:"用户ID"}}),r("el-table-column",{attrs:{prop:"username",label:"用户名"}}),r("el-table-column",{attrs:{prop:"usersex",label:"性别"}}),r("el-table-column",{attrs:{prop:"userphone",label:"手机"}}),r("el-table-column",{attrs:{prop:"useremail",label:"邮箱"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return r.stopPropagation(),e.alter(t.row)}}})]}}])})],1)],1),r("el-dialog",{attrs:{center:"",visible:e.dialogVisible,"before-close":e.handleClose,title:"修改用户信息",width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"alteruserFormref",attrs:{inline:"","label-width":"65px",rules:e.rules,model:e.alteruserForm}},[r("el-form-item",{attrs:{prop:"username",label:"用户名"}},[r("el-input",{model:{value:e.alteruserForm.username,callback:function(t){e.$set(e.alteruserForm,"username",t)},expression:"alteruserForm.username"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.alteruserForm.usersex,callback:function(t){e.$set(e.alteruserForm,"usersex",t)},expression:"alteruserForm.usersex"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"userphone",label:"手机",disabled:""}},[r("el-input",{model:{value:e.alteruserForm.userphone,callback:function(t){e.$set(e.alteruserForm,"userphone",t)},expression:"alteruserForm.userphone"}})],1),r("el-form-item",{attrs:{prop:"useremail",label:"邮箱"}},[r("el-input",{model:{value:e.alteruserForm.useremail,callback:function(t){e.$set(e.alteruserForm,"useremail",t)},expression:"alteruserForm.useremail"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.submit("alteruserFormref")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],i=(r("45fc"),r("96cf"),r("1da1")),l={data:function(){var e=function(e,t,r){var a=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;a.test(t)||""==t||void 0==t?r():r(new Error("请输入正确的邮箱"))},t=function(e,t,r){var a=/^1[3456789]\d{9}$/;a.test(t)||""==t||void 0==t?r():r(new Error("请输入正确的手机号码"))};return{userlist:[{}],alteruserForm:{},dialogVisible:!1,active:1,inactive:2,options:[{label:"男",value:1},{label:"女",value:2}],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],userphone:[{validator:t,trigger:"change"}],useremail:[{validator:e,trigger:"change"}]}}},created:function(){this.getuserlist()},methods:{getuserlist:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("user/list");case 2:r=t.sent,a=r.data,e.userlist=a.obj;case 5:case"end":return t.stop()}}),t)})))()},alter:function(e){this.dialogVisible=!0,this.alteruserForm=e},submit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,t.$http.post("user/updateUser",t.alteruserForm);case 4:a=e.sent,s=a.data,200===s.code&&(t.userlist.some((function(e){e.userid===t.alteruserForm.userid&&(e=t.alteruserForm)})),t.handleClose());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleClose:function(){this.dialogVisible=!1},statusChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.userid,s=e.userban,r.next=3,t.$http.post("admin/banUser",{id:a,ban:s});case 3:i=r.sent,i.data;case 5:case"end":return r.stop()}}),r)})))()}}},n=l,o=r("2877"),u=Object(o["a"])(n,a,s,!1,null,null,null);t["default"]=u.exports},dcef:function(e,t,r){}}]);
//# sourceMappingURL=mana.de2ba61a.js.map